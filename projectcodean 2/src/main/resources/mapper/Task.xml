<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codeanapp.project.mapper.TaskMapper">

    <insert id="insertTask" parameterType="com.codeanapp.project.model.Task">
        INSERT INTO task (idtask, stackid, pengajarid, soal, deskripsi)
        VALUES (#{idtask}, #{stackid}, #{pengajarid}, #{soal}, #{deskripsi})
    </insert>

    <select id="getAllTask" resultType="com.codeanapp.project.model.Task">
        SELECT idtask, stackid, pengajarid, soal, deskripsi
        FROM task
    </select>

    <update id="updateTask" parameterType="com.codeanapp.project.dto.TaskUpdateDto">
        UPDATE task
        <set>
            <if test="oldidtask != null">
                idtask = #{oldidtask},
            </if>
            <if test="stackid != null">
                stackid = #{stackid},
            </if>
            <if test="pengajarid != null">
                pengajarid = #{pengajarid},
            </if>
            <if test="soal">
                soal = #{soal},
            </if>
            <if test="deskripsi">
                deskripsi = #{deskripsi},
            </if>
        </set>
        WHERE idtask = #{oldidtask}
    </update>

    <delete id="deleteTask" parameterType="com.codeanapp.project.model.Task">
        DELETE FROM task
        WHERE idtask = #{idtask}
    </delete>
</mapper>