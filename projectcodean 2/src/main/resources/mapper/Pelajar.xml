<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codeanapp.project.mapper.PelajarMapper">

    <insert id="insertPelajar" parameterType="com.codeanapp.project.model.Pelajar">
        INSERT INTO pelajar (idpelajar, namalengkap, nowa, jeniskelamin, namasekolah, jurusan, pengetahuankoding, pengajarid)
        VALUES (#{idpelajar}, #{namalengkap}, #{nowa}, #{jeniskelamin}, #{namasekolah}, #{jurusan}, #{pengetahuankoding}, #{pengajarid})
    </insert>

    <select id="getAllPelajar" resultType="com.codeanapp.project.model.Pelajar">
        SELECT idpelajar, namalengkap, nowa, jeniskelamin, namasekolah, jurusan, pengetahuankoding, pengajarid
        FROM pelajar
        ORDER BY
        <choose>
            <when test="sort == 'namaAsc'"> namalengkap ASC</when>
        </choose>
        LIMIT #{pageSize} OFFSET #{offset}
    </select>

    <select id="countPelajar" resultType="int">
        SELECT COUNT (*) FROM pelajar
    </select>

    <update id="updatePelajar" parameterType="com.codeanapp.project.dto.PelajarUpdateDto">
        UPDATE pelajar
        <set>
            <if test="oldidpelajar != null">
                idpelajar = #{oldidpelajar},
            </if>
            <if test="namalengkap != null">
                namalengkap = #{namalengkap},
            </if>
            <if test="nowa != null">
                nowa = #{nowa},
            </if>
            <if test="jeniskelamin != null">
                jeniskelamin = #{jeniskelamin},
            </if>
            <if test="namasekolah != null">
                namasekolah = #{namasekolah},
            </if>
            <if test="jurusan != null">
                jurusan = #{jurusan},
            </if>
            <if test="pengetahuankoding != null">
                pengetahuankoding = #{pengetahuankoding},
            </if>
        </set>
        WHERE idpelajar = #{oldidpelajar}
    </update>

    <delete id="deletePelajar" parameterType="String">
        DELETE FROM pelajar
        WHERE idpelajar = #{idpelajar}
    </delete>
</mapper>
